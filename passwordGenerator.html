<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    
    <title>Document</title>
  </head>
  <body>
    <H1>Password Generator</H1>
    <div class="container-fluid">
      <!-- first row contains the list of input
      using a gird to ensure that they line up nicely -->
      <div class="row">
        <!-- 6 row to take half the scree -->
        <div class="col-md-6 sidee">
          <!-- start input section -->
          <div id="container-fluid">
            <div class="row">
              <div class="col-md-8 text-right criteria">
                Min length:
              </div>
              <div class="col-md-4 userinput">
                <input type="number" id="minLength" name="minLength" required> </input>
              </div>
            </div>
            <div class="row">
              <div class="col-md-8 text-right criteria">
                Max length:
              </div>
              <div class="col-md-4 userinput">
                <input type="number" id="maxLength" name="maxLength" required> </input>
              </div>
            </div>
            <div class="row">
              <div class="col-md-8 text-right criteria">
                  Include Special Characters?
              </div>
              <div class="col-md-1 userinput">
                <input class="div-check-input" type="checkbox" value="" id="specialChars">
              </div>
            </div>
            <div class="row">
              <div class="col-md-8 text-right criteria">
                Include Numeric Characters?
              </div>
              <div class="col-md-1 userinput">
                <input class="div-check-input" type="checkbox" value="" id="numericChars">
              </div>
            </div>
            <div class="row">
              <div class="col-md-8 text-right criteria">
                Include Lower Case?
              </div>
              <div class="col-md-1 userinput">
                <input class="div-check-input" type="checkbox" value="" id="lowerCase">
              </div>
            </div>
            <div class="row">
              <div class="col-md-8 text-right criteria">
                Include Upper Case?
              </div>
              <div class="col-md-1 userinput">
                <input class="div-check-input" type="checkbox" value="" id="upperCase">
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <button onclick="passwordGenerator()" class="center">Generate Password</button>
              </div>
            </div>
          </div>
        </div>
        <!-- right side of screen for output -->
        <div class="col-md-6">
          <h4 class="output-title"> Generated Password </h4>
          <p type="textarea" readonly>stuff goes here</p>
        </div>
      </div>
    </div>

    <script type="text/javascript">

    function passwordGenerator() { // pull values from DOM
      // set testing flag
      var testing = true;

      // grab output fields
      let pswdParmsDOM = document.getElementById('container-fluid');  

      // get user values for lengths and convert user entered string to a number
      const minLengthNumDOM = Number(document.getElementById('minLength').value);  
      const maxLengthNumDOM = Number(document.getElementById('maxLength').value);  

      //get boolean check box values 
      const specialCharsBoolDOM = document.getElementById('specialChars').checked;  
      const numericCharsBoolDOM = document.getElementById('numericChars').checked;  
      const lowerCaseBoolDOM = document.getElementById('lowerCase').checked;  
      const upperCaseBoolDOM = document.getElementById('upperCase').checked;  
 
      if (testing) {
        console.log("min " + minLengthNumDOM + " ofType " + typeof minLengthNumDOM);
        console.log("max " + maxLengthNumDOM);
        console.log("spec " + specialCharsBoolDOM);
        console.log("num " + numericCharsBoolDOM);
        console.log("low " + lowerCaseBoolDOM);
        console.log("up " + upperCaseBoolDOM);
      }

      // initialize inputErrors array to hold list of error objects
      let inputErrors = []; 

      // checks to ensure that min legth requirement is meet
      if ( isNaN(minLengthNumDOM) || minLengthNumDOM < 8 ) {
        if ( testing ) { 
          console.log("Found error with min length"); 
          console.log(! isNaN(minLengthNumDOM)); 
          console.log(minLengthNumDOM < 8); 
          }

        // add error object to the error array
        inputErrors.push({ field: "Minimum length", inputNum: minLengthNumDOM, requirement: "Must be greater than 8 characters." });
      }

      // checks to ensure that max length requirement is not exceeded
      if ( isNaN(maxLengthNumDOM) || minLengthNumDOM > 126 ) {
        if ( testing ) { console.log("Found error with max length"); }

        // add error object to the error array
        inputErrors.push({ field: "Maximum length", inputNum: maxLengthNumDOM, requirement: "Must be less than 126 characters." });
      }

      // checks to see that at least one character class has been selected
      if ( ! (specialCharsBoolDOM || numericCharsBoolDOM || lowerCaseBoolDOM || upperCaseBoolDOM) ) {
        if ( testing ) { console.log("Found error with char class"); }

        // add error object to the error array
        inputErrors.push({ field: "Character Class", inputNum: null, requirement: "You must select at least one character class" });
      }

      // report error output if inputError object contains errors else generate passord
      if ( Object.keys(inputErrors).length !== 0 ) {
        if ( testing ) { console.log("Found errors") }
      } else {
        if ( testing ) { console.log("Time to generate password!") }
      }
    }
    </script>
  </body>
</html>